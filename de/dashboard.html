<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes">
<link href="../style.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="/jquery/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	if (navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
		$(".android").hide();
		$(".apple").show();
	}
	$("img.thumb").click(function() {
		$("img.thumb").show().next("img.large").hide();
		$(this).hide();
		$(this).next("img.large").fadeIn();
	});
	$("img.large").click(function() {
		$(this).hide();
		$(this).prev("img.thumb").show();
	});
});
</script>
</head>
<body>
<h1>Dashboard</h1>
<p>Zusätzlich zur Ansicht „Messages“ bietet die App eine Dashboard-Ansicht.
Diese verfügt über eine grafische Benutzeroberfläche, in der sich Anzeige-
und Steuerelemente („Dashes“) anlegen lassen, z.&nbsp;B. Temperaturanzeige,
Steuerungsschalter für Lampen, Alarmanlagen u.&nbsp;v.&nbsp;a.&nbsp;m.</p>
<div class="android">
<p><img class="thumb" src="../img/dashboard_view.png" width="275">
<img class="large" src="../img/dashboard_view.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/dashboard_view.png" width="275">
<img class="large" src="../img/dashboard_view.png"></p>
</div>
<ul class="instruction">
<li>Tippen Sie nach dem Starten der App auf den Listeneintrag eines
Push-Server-Kontos.</li>
<li>Tippen Sie dann im Fenster „Messages“ auf das Icon <span class="android"><img
src="../img/dashboard_icon.png" height="16"></span><span class="apple"><img
src="../img/dashboard_icon.png" height="16"></span>.</li>
</ul>
<p>Die Ansicht „Dashboard“ öffnet sich.</p>
<ul class="instruction">
<li>Tippen Sie auf das Icon <span class="android"><img
src="../img/plus_icon.png" height="16"></span><span class="apple"><img
src="../img/plus_icon.png" height="16"></span>.</li>
</ul>
<p>Ein Einblendmenü öffnet sich und bietet verschiedene Vorlagen für Dashes
an, welche für die unterschiedlichsten Zwecke eine gute Ausgangsbasis für
eigene Lösungen bieten.</p>
<div class="android">
<p><img class="thumb_noreplace" src="../img/dashboard.png" width="175"></p>
</div>
<div class="apple">
<p><img class="thumb_noreplace" src="../img/dashboard.png" width="175"></p>
</div>
<table border="1">
<tr>
<th>Dash</th><th>Erläuterung</th>
</tr>
<tr>
<td><em>Text View</em></td><td>Zur Darstellung von Nachrichten in Textform
und zur Eingabe von Werten. Siehe dazu den Abschnitt <a href="#textview">Text&nbsp;View</a></td>
</tr>
<tr>
<td><em>Button/Switch</em></td><td>Erzeugt eine Schaltfläche bzw. einen
Schalter. Siehe dazu den Abschnitt <a href="#button">Button/Switch</a></td>
</tr>
<tr>
<td><em>Progress&nbsp;Bar/Slider</em></td><td>Stellt einen Wertebereich
durch einen Balken dar. Wird ein „Publish Topic“ angegeben, kann mithilfe
eines Schiebereglers ein neuer Wert gesetzt und gesendet werden. Siehe
dazu den Abschnitt <a href="#slider">Progress&nbsp;Bar/Slider</a</td>
</tr>
<tr>
<td><em>Option List</em></td><td>Erlaubt die Definition einer beliebigen
Menge von Werten. Siehe dazu den Abschnitt <a href="#optionlist">Option&nbsp;List</a></td>
</td>
</tr>
<tr>
<td><em>Group View</em></td><td>Zur Gruppierung von Dash-Kacheln.
Siehe dazu den Abschnitt <a href="#groupview">Group&nbsp;View</a></td>
</td>
</tr>
<tr>
<td><em>Custom View</em></td><td>Erlaubt das Anlegen neuer Dashes
in HTML. Siehe dazu den Abschnitt <a href="#customview">Custom&nbsp;View</a>
</td>
</tr>
</table>
<h2>Vorlagen für Dashes</h2>
<h3 id="textview">Text View</h3>
<img class="thumb_noreplace" src="../img/text_view_thumb.png" height="100">
<p>Stellt den Inhalt einer Nachricht in Textform dar. Sofern ein „Publish
Topic“ angegeben wurde, kann in der Detailansicht ein Wert eingegeben und
gesendet werden.</p>
<ul>
<li>Erforderliche Elemente:<br>
<em><a href="#topic_sub">Topic (sub)</a>, <a href="#input_type">Input Type</am></em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#group">Group</a>, <a href="#pos">Pos</a>,
<a href="#color">Color</a>, <a href="#text_size">Text Size</a>,
<a href="#image">Image</a>, <a href="#filter_script">Filter Script</a>,
<a href="#topic_pub">Topic (pub)</a>, <a href="#retain">Retain</a>,
<a href="#script">Script</a></em>
</ul>
<h3 id="button">Button/Switch</h3>
<img class="thumb_noreplace" src="../img/button_switch_thumb.png" height="100">
<p>Erzeugt eine Schaltfläche, welche z.&nbsp;B. als Taster fungiert, der
bei Betätigung eine Nachricht versendet. Dazu wird in „Off state“ nichts
eingetragen. Wird die Schaltfläche als Schalter angelegt, der in
Abhängigkeit des Wertes der letzten empfangenen Nachricht seinen Zustand
ändert (an/aus), muss im „Off state“ ein Topic eingetragen sein. Damit
ließe sich beispielsweise eine Alarmanlage steuern. Ein weiteres Beispiel
für einen Dash, der eine Lampe ein- und ausschaltet und gleichzeitig über
den aktuellen Schaltstatus informiert, finden Sie <a href="#examples">hier</a>.</p>
<ul>
<li>Erforderliche Elemente:<br>
<em><a href="#topic_sub">Topic (sub)</a>, <a href="#topic_pub">Topic
(pub)<sup>*</sup></a>, <a href="#value">Value</a></em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#group">Group</a>, <a href="#pos">Pos</a>,
<a href="#color">Color</a>, <a href="#text_size">Text Size</a>,
<a href="#image">Image</a>, <a href="#filter_script">Filter Script</a>,
<a href="#retain">Retain</a>,
<a href="#script">Script</a></em></li>
</ul>
<p><small><em>*&nbsp;Wenn als Schalter mit Statusabfrage genutzt, ansonsten
optional</em></small></p>
<h3 id="slider">Progress Bar/Slider</h3>
<img class="thumb_noreplace" src="../img/slider_thumb.png" height="100">
<p>Ein Wertebereich wird durch einen Balken dargestellt, wobei der Balken
bis zum aktuellen Wert eingefärbt wird (wie bei einer Fortschrittsanzeige).
Wurde ein „Publish Topic“ angegeben, kann in der Detailansicht durch einen
Schieberegler ein neuer Wert gesetzt und gesendet werden.</p>
<ul>
<li>Erforderliche Elemente:<br>
<em><a href="#range">Range</a>, <a href="#topic_sub">Topic (sub)</a>,
<a href="#topic_pub">Topic (pub)<sup>*</sup></a></em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#group">Group</a>, <a href="#pos">Pos</a>,
<a href="#color">Color</a>, <a href="#text_size">Text Size</a>,
<a href="#image">Image</a>, <a href="#filter_script">Filter Script</a>,
<a href="#retain">Retain</a>,
<a href="#decimal">Decimal</a>, <a href="#display_percent">Display in percent</a>,
<a href="#script">Script</a></em></li>
</ul>
<p><small><em>*&nbsp;Wenn als Slider zur Übermittlung von Werten genutzt,
ansonsten optional</em></small></p>
<h3 id="optionlist">Option List</h3>
<img class="thumb_noreplace" src="../img/lang-option_thumb.png" height="100">&nbsp;&nbsp;<img class="thumb_noreplace" src="../img/languages_thumb.png" height="100">
<p>Erlaubt die Definition einer Menge von Werten. Für jede Option kann
ein Anzeigewert definiert werden, der anstatt des tatsächlichen Wertes
angezeigt wird.</p>
<ul>
<li>Erforderliche Elemente:<br>
<em><a href="#option_list">Option List</a></em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#group">Group</a>, <a href="#pos">Pos</a>,
<a href="#color">Color</a>, <a href="#text_size">Text Size</a>,
<a href="#image">Image</a>, <a href="#filter_script">Filter Script</a>,
<a href="#topic_pub">Topic (pub)</a>, <a href="#retain">Retain</a>,
<a href="#script">Script</a></em></li>
</ul>
<h3 id="groupview">Group View</h3>
<img class="thumb_noreplace" src="../img/group_thumb.png" height="100">
<p>Für eine bessere Übersicht im Dashboard lassen sich Gruppen anlegen,
denen einzelne Dashes zugeordnet werden können. Das könnten zum Beispiel
folgende Gruppen-Unterteilungen sein: Keller, Erdgeschoss, Obergeschoss,
Gartenhaus usw.</p>
<ul>
<li>Erforderliche Elemente:<br>
<em>–</em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#pos">Pos</a>, <a href="#color">Color</a>,
<a href="#text_size">Text Size</a></em></li>
</ul>
<div class="note">
<h6>Hinweis:</h6>
<p>Einzelne Dashes lassen sich gruppieren oder können auch einer
anderen <a href="#groupview">Gruppe zugeordnet werden</a>. Dazu tippen
und halten Sie die gewünschte Dash-Kachel („Long Press“), bis ein
<img src="../img/checkmark.png" height="16"> erscheint und Sie
per <img src="../img/edit.png" height="16"> in den Bearbeitungsmodus
wechseln können.<br>
<br>
Über „Group“ und „Pos“ kann die Kachel nun in die gewünschte Position
gebracht werden.</p>
</div>
<h3 id="customview">Custom View</h3>
<img class="thumb_noreplace" src="../img/custom_view_thumb.png" height="100">
<p>„Custom View“ entspricht einem Standard-Browserfenster, welches
zur Realisierung individueller Oberflächen und Bedienelemente verwendet
werden kann. Hiermit lassen sich beliebige Dashes in HTML anlegen. Das
HTML kann zusätzlich JavaScript-Code enthalten, um Dashes mit individueller
Logik zu programmieren.
Über eine Programmierschnittstelle <em>(API)</em> können MQTT-Nachrichten
empfangen und Einstellungen abgefragt und es kann auf Ressourcen z.&nbsp;B.
importierte Bilder, zugegriffen werden. Siehe dazu <a href="dashboard_scripts.html">Dashboard-Skripte</a>).
Alternativ erhalten Sie durch Tippen auf das Überlaufmenü <span
class="nowrap">(<span class="android"><img src="../img/overflow_icon.png"
height="16"></span><span class="apple"><img src="../img/overflow_icon.png"
height="16"></span>)</span> unter „Insert Example“ sieben verschiedene
HTML-Vorlagen <em>(Basic HTML</em>, <em>Color Picker</em>, <em>Gauge</em>,
<em>Clock</em>, <em>Light Switch with Color Picker</em>, <em>Thermometer</em>
und <em>Line Graph)</em>,  die sich direkt in den Dash einfügen und bearbeiten
lassen.<p>
<div class="note">
<h6>Hinweis:</h6>
<p>Zum Erstellen eines Customs Views sind fortgeschrittene Kenntnisse in HTML
und JavaScript erforderlich. Manche Beispiele verwenden HTML5 und laufen
möglicherweise nicht auf älteren Mobilgeräten. In den Beispielen, in denen
empfangene Nachrichtendaten verarbeitet werden, muss der Code entsprechend
der Datenstruktur des Nachrichteninhalts angepasst werden. Siehe auch
<a href="dashboard_scripts.html#customviewHTML">Custom View HTML</a>.</p>
</div>
<div class="android">
<p><img class="thumb_noreplace" src="../img/custom_view-examples.png" width="250"></p>
</div>
<div class="apple">
<p><img class="thumb_noreplace" src="../img/custom_view-examples.png" width="250">
</p>
</div>
<ul>
<li>Erforderliche Elemente:<br>
<em><a href="#html">HTML</a></em></li>
<li>Optionale Elemente:<br>
<em><a href="#name">Name</a>, <a href="#pos">Pos</a>, <a href="#color">Color</a>,
<a href="#topic_sub">Topic (sub)</a>, <a href="#params">Parameters</a>,
<a href="#historical_data">Provide historical data</a></em></li>
</ul>
<h2 id="configuration_elements">Konfigurationselemente</h2>
<ul>
<li id="name"><em>Name</em><br>
Hier geben Sie dem anzulegenden Dash einen Namen</li>
<li id="group"><em>Group</em><br>
Hier ordnen Sie den Dash einer Gruppe zu</li>
<li id="pos"><em>Pos</em><br>
Hier legen Sie die Position der Dash-Kachel innerhalb einer Gruppe
fest</li>
<li id="color"><em>Color</em><br>
Hier können Sie für den jeweiligen Konfigurationskontext eine Farbe
auswählen (z.&nbsp;B. Vordergrund, Hintergrund, Text, Fortschrittsbalken)
</li>
<li id="text_size"><em>Text Size</em><br>
Hier können Sie die verwendete Textgröße („small“/„medium“/„large“) auswählen
</li>
<li id="image"><em>Image</em><br>
Hier können Sie ein Bild auswählen (siehe auch <a href="#manage_images">
Eigene Bilder in die App importieren</a>)</li>
<li id="topic_sub"><em>Topic (sub)</em><br>
Hier geben Sie ein Topic an, für das Sie Nachrichten/Werte erhalten möchten</li>
<li id="filter_script"><em>Filter Script</em><br>
Hier haben Sie die Möglichkeit, JavaScript-basierte Filterskripte einzugeben,
welche Nachrichteninhalte analysieren und formatieren. Außerdem haben Sie
die Möglichkeit, den Dash dynamisch zu gestalten (z.&nbsp;B. Hintergrundfarbe,
Textgröße usw. in Abhängigkeit von empfangenen Werten anzuzeigen). Siehe
dazu auch <a href="dashboard_scripts.html">Dashboard-Skripte</a></li>
<li id="topic_pub"><em>Topic (pub)</em><br>
Hier geben Sie das Topic an, an das Werte gesendet werden sollen</li>
<li id="retain"><em>Retain</em><br>
Hier können Sie festlegen, dass gesendete Nachrichten auf dem MQTT-Server
vorgehalten werden. Es wird immer nur die letzte gesendete Nachricht
pro Topic vorgehalten</li>
<li id="input_type"><em>Input Type</em><br>
Hier können Sie von Text- auf Zifferneingabe umschalten</li>
<li id="range"><em>Range</em><br>
Hier definieren Sie den Wertebereich des darzustellenden Forschrittsbalkens
und Schiebereglers</li>
<li id="display_percent"><em>Display in percent</em><br>
Hier können Sie festlegen, dass ein Wert in Prozent (bezogen auf den
gesamten Wertebereich) angezeigt wird</li>
<li id="decimal"><em>Decimal</em><br>
Hier können Sie die Nachkommastellen des angezeigten Wertes festlegen</li>
<li id="option_list"><em>Option List</em><br>
Hier können Sie für jede Option einen Anzeigewert oder eine Bilddatei
definieren, welche anstelle des tatsächlichen Wertes angezeigt werden.</li>
<li id="script"><em>Script</em><br>
Hier können Sie ein Skript eintragen, um Daten, die gesendet werden sollen,
aufzubereiten, z.&nbsp;B. im Format <em>JSON</em>. Je nach Dash ist
eine User-Aktion, z.&nbsp;B. durch Tippen auf eine Schaltfläche (siehe Abschnitt
<a href="#button">Button/Switch</a>), erforderlich. Ein „Topic (pub)“ muss
gesetzt worden sein. Außerdem haben Sie die Möglichkeit, den Dash
dynamisch zu gestalten (z.&nbsp;B. Hintergrundfarbe, Textgröße usw. in
Abhängigkeit von veröffentlichten Werten anzuzeigen). Siehe dazu auch
<a href="dashboard_scripts.html">Dashboard-Skripte</a></li>
<li id="params"><em>Parameters</em><br>
Hier können Sie Werte festlegen, die bei der Initialisierung eines Dashes
übergeben werden, um z.&nbsp;B. die Darstellung in Abhängigkeit dieses
Wertes zu ändern. Parameter können über das JavaScript-Interface abgefragt
werden (siehe Beschreibung zu <a href="dashboard_scripts.html#getparams"><tt>MQTT.view.getParameters()</tt></a>)</p>
<li id="html"><em>HTML</em><br>
Hier können Sie Ihren eigenen HTML-Code zur Gestaltung der Dash-Kachel
eingeben. Dabei ist auch die Einbindung von JavaScript zulässig</li>
<li id="historical_data"><em>Provide historical data</em><br>
Ist diese Option aktiviert, werden bis zu 100 der letzten Nachrichten
vorgehalten. Diese können über das JavaScript-Interface abgefragt werden
(siehe Beschreibung zu <a href="dashboard_scripts.html#gethistoricaldata"><tt>MQTT.view.getHistoticalData()</tt></a>)</li>
</ul>
<h2 id="manage_images">Eigene Bilder in die App importieren</h2>
<p>Einige Dashes erlauben die Einbindung von Bildern
(Hintergründe, Status von Schaltern usw.). Damit eigene Bilder in der
App zur Verfügung stehen, müssen diese zuvor in die App importiert werden:</p>
<ul class="instruction">
<li>Wählen Sie dazu im Fenster „Dashboard“ den Eintrag „Manage Images“
aus dem Überlaufmenü <span class="nowrap">(<span class="android"><img
src="../img/overflow_icon.png" height="16"></span><span class="apple"><img
src="../img/overflow_icon.png" height="16"></span>)</span> aus.</li>
</ul>
<div class="android">
<p><img class="thumb" src="../img/manage_images.png" width="275">
<img class="large" src="../img/manage_images.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/manage_images.png" width="275">
<img class="large" src="../img/manage_images.png"></p>
</div>
<ul class="instruction">
<li>Öffnen Sie dann im Fenster „Manage Images“ erneut das Überlaufmenü <span class="nowrap">(<span
class="android"><img src="../img/overflow_icon.png" height="16"></span><span
class="apple"><img src="../img/overflow_icon.png" height="16"></span>)</span>,
tippen Sie auf „Import“ und wählen Sie die Bilder aus, die Sie in die App
importieren möchten.</li>
</ul>
<p>Alle in die App importierten Bilder werden im Fenster „Manage Images“
angezeigt:
<div class="android">
<p><img class="thumb" src="../img/import_images.png" width="275">
<img class="large" src="../img/import_images.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/import_images.png" width="275">
<img class="large" src="../img/import_images.png"></p>
</div>
<p>Beim Beenden der App werden Bilder, die in keinem Dash verwendet
werden, gelöscht. Gleiches gilt auch für Bilder, die ausschließlich im
Skriptcode referenziert werden. Um dies zu verhindern, können sie geschützt
werden. Im obigen Bild sind bereits zwei zuvor importierte Bilder zu sehen.
Beide sind mit solch einem Schutz <span class="nowrap">(<span class="android"><img
src="../img/padlock.png" height="16"></span><span class="apple"><img
src="../img/padlock.png" height="16"></span>)</span> versehen.</p>
<ul class="instruction">
<li>Tippen und halten Sie die gewünschte Bilddatei („Long Press“), bis
<span class="android"><img src="../img/padlock.png" height="16"></span><span
class="apple"><img src="../img/padlock.png" height="16"></span> erscheint.</li>
</ul>
<p>Die mit einem <span class="android"><img src="../img/padlock.png"
height="16"></span><span class="apple"><img src="../img/padlock.png"
height="16"></span> versehenen Bilder sowie Bilder, die explizit als
Hintergrundbild oder Label für die Dashes <em>Button/Switch</em> oder
<em>Option List</em> gewählt wurden,
bleiben beim Neustart der App erhalten.</p>
<div class="note">
<h6>Hinweis zu Bildern mit Transparenzen:</h6>
<p>Werden Bilder, welche Transparenzen enthalten, über das Feld „Image“
in den Dash eingebunden, so bleiben diese Transparenzen erhalten.
Die folgende Abbildung zeigt den Vergleich zwischen einem Bild <em>mit</em>
(links) und einem <em>ohne</em> Transparenzen (rechts). Beide Bilder liegen
über einem gelb eingefärbten Hintergrund:</p>
<div class="android">
<p><img class="thumb" src="../img/transp_flat.png" width="275">
<img class="large" src="../img/transp_flat.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/transp_flat.png" width="275">
<img class="large" src="../img/transp_flat.png"></p>
</div>
<p>Bilder, die in Schaltflächen verwendet werden, können eingefärbt werden.
Bilder ohne Transparenz würden komplett mit der gewählten Farbe eingefärbt
werden. Die folgende Abbildung basiert auf der vorherigen, hat aber zusätzlich
eine rote Einfärbung des Vordergrunds:</p>
<div class="android">
<p><img class="thumb" src="../img/tinted.png" width="275">
<img class="large" src="../img/tinted.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/tinted.png" width="275">
<img class="large" src="../img/tinted.png"></p>
</div>
</div>
<h2 id="examples">Beispiele</h2>
<p>Ein Dash soll konfiguriert werden, der eine Lampe ein- und
ausschaltet und gleichzeitig über den aktuellen Schaltstatus informiert.</p>
<ul class="instruction">
<li>Wählen Sie aus dem Menü den Eintrag „Button/Switch“ aus:</li>
</ul>
<div class="android">
<p><img class="thumb" src="../img/edit_button-1.png" width="275">
<img class="large" src="../img/edit_button-1.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/edit_button-1.png" width="275">
<img class="large" src="../img/edit_button-1.png"></p>
</div>
<ul class="instruction">
<li>Legen Sie zuerst einen Namen für den Dash fest (im obigen Beispiel
haben wir sie „Schalter“ genannt).</li>
<li>Definieren Sie ggf. die Hintergrundfarbe der Dash-Kachel an sich
sowie die Vorder- und Hintergrundfarbe der Schaltzustände <em>An</em>
(„On state“) bzw. <em>Aus</em> („Off state“).</li>
</ul>
<p>Zu einer Hintergrundfarbe lässt sich zusätzlich auch ein Bild verwenden:</p>
<ul class="instruction">
<li>Tippen Sie auf die Schaltfläche neben „Image“.</li>
</ul>
<p>Es öffnet sich das Fenster „Select an Image“, welches eine Reihe von
Icons und Symbolen zur Verfügung stellt. Alternativ dazu können auch eigene
Bilder verwendet werden, die zuvor in die App importiert wurden (siehe
Abschnitt <a href="#manage_images">Eigene Bilder in die App importieren</a>).</p>
<div class="android">
<p><img class="thumb" src="../img/edit_button-2.png" width="275">
<img class="large" src="../img/edit_button-2.png"></p>
</div>
<div class="apple">
<p><img class="thumb" src="../img/edit_button-2.png" width="275">
<img class="large" src="../img/edit_button-2.png"></p>
</div>
<ul class="instruction">
<li>Tragen Sie sowohl für den Empfang („Topic (sub)“) als auch für das
Senden („Topic (pub)“) ein Topic ein.</li>
</ul>
<p>Nur so kann der Dash den Schaltstatus („Topic (sub)“)
vom Server abfragen und Schaltbefehle an den Server geben („Topic (pub)“).</p>
</body>
</html>